buildscript {
	repositories {
		maven {
			url 'https://plugins.gradle.org/m2/'
		}
	}
	dependencies {
		classpath 'gradle.plugin.edu.sc.seis.gradle:launch4j:1.6.2'
	}
}

repositories {
	mavenCentral()
}

apply plugin: "java"
apply plugin: "edu.sc.seis.launch4j"

version = "1.0"

dependencies {
	compile group: 'org.ini4j', name: 'ini4j', version: '0.5.1'
	runtime group: 'org.ini4j', name: 'ini4j', version: '0.5.1'
}

sourceSets {
	main.java.srcDir "src"
}

jar {
	manifest.attributes "Main-Class" : "game.Main", "Class-Path": "."
	from configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
}

launch4j {
	mainClassName = "game.Main"
	outfile = "Tetris.exe"
	icon = project.rootDir.getPath() + "/resources/tetris.ico"
}

task makeJarZip(type: Zip, dependsOn: "jar") {
	from "build/libs"
	from "music.waw"
	from "config.ini"
	from "Tetrads.xml"
	into "tetris"
	appendix = "jar"
}

task makeExeZip(type: Zip, dependsOn: "launch4j") {
	from "build/launch4j/Tetris.exe"
	from "music.waw"
	from "config.ini"
	from "Tetrads.xml"
	into "tetris"
	appendix = "exe"
}
